# Migration `20201017044446-user-relation`

This migration has been generated by 권수현 at 10/17/2020, 1:44:46 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `TotalAccTime` ADD FOREIGN KEY (`userId`) REFERENCES `pushuser`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `TotalCount` ADD FOREIGN KEY (`userId`) REFERENCES `pushuser`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `WeeklyAccTime` ADD FOREIGN KEY (`userId`) REFERENCES `pushuser`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `WeeklyCount` ADD FOREIGN KEY (`userId`) REFERENCES `pushuser`.`User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201017033209-init-push-db..20201017044446-user-relation
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 model Profile {
   id                Int                 @default(autoincrement()) @id
@@ -27,8 +27,14 @@
   updatedAt         DateTime?           @default(now()) @updatedAt
   deletedAt         DateTime?
   lastSignedIn      DateTime?
   profile           Profile?
+  workOut           WorkOut[]
+  mission           Mission[]
+  weeklyCount       WeeklyCount[]
+  totalCount        TotalCount[]
+  weeklyAccTime     WeeklyAccTime[]
+  totalAccTime      TotalAccTime[]
 }
 model WorkOut {
   id                Int                 @default(autoincrement()) @id
@@ -58,28 +64,32 @@
 model WeeklyCount {
   userId            Int                 @unique
   createdAt         DateTime?
   count             Int  
+  User              User                @relation(fields: [userId], references: [id])
 }
 model TotalCount {
   userId            Int                 @unique
   createdAt         DateTime?           @default(now())
   deletedAt         DateTime?
   count             Int  
+  User              User                @relation(fields: [userId], references: [id])
 }
 model WeeklyAccTime {
   userId            Int                 @unique
   createdAt         DateTime?
   accTime           Int  
+  User              User                @relation(fields: [userId], references: [id])
 }
 model TotalAccTime {
   userId            Int                 @unique
   createdAt         DateTime?           @default(now())
   deletedAt         DateTime?
   accTime           Int
+  User              User                @relation(fields: [userId], references: [id])
 }
 enum Gender {
   male
```


